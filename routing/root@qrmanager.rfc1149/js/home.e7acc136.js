(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["home"],{1071:function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"edit"},[n("TopBar",{attrs:{message:t.input}}),n("h2",{staticClass:"f3 pa3 tc"},[t._v(" edit ")]),n("GenerateForm",{on:{generate:t.serveQR,new:function(e){t.input=e}}},[t._v(" Edit ")]),n("card-unique-q-r",{attrs:{short_url:t.id}}),n("br")],1)},o=[],r=n("2ef0"),a=n.n(r),i=n("bc3a"),c=n.n(i),l=n("4ae4"),u=n("b043"),h=n("f565"),d=n("b383"),p=n.n(d),f={components:{GenerateForm:l["a"],TopBar:u["a"],CardUniqueQR:h["a"]},props:{},data:function(){return{input:"https://www.youtube.com/watch?v=6n3pFFPSlW4",short_url:"https://www.youtube.com/watch?v=6n3pFFPSlW4",shorts:["foo","bar","test"],generated:!1,id:0,apiHandle:"https://qrmanager.rfc1149.net/url"}},computed:{req:function(){return{url:{url:this.input}}}},created:function(){this.id=this.$route.params.id,this.debouncedserveQR=a.a.debounce(this.serveQR,500)},methods:{serveQR:function(t){this.short_url=t,this.generated=!0;var e=new FormData;e.append("url",this.req),c()({method:"put",url:this.apiHandle+"/"+this.id,data:p.a.stringify(this.req),withCredentials:!0}).then(function(t){console.log(t)}).catch(function(t){console.log(t)})}}},m=f,b=n("2877"),v=Object(b["a"])(m,s,o,!1,null,null,null);e["default"]=v.exports},bb51:function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[n("TopBarHome",{}),t.notconnected?n("PleaseConnect",{on:{click:t.get_QR}}):t._e(),n("ListCard",{attrs:{ids:t.shorts},on:{delete_qr:t.remove_QR}})],1)},o=[],r=(n("2ef0"),n("bc3a")),a=n.n(r),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"TopBar"},[n("nav",{staticClass:"flex justify-between bg-black b--black-10"},[t._m(0),n("div",{staticClass:"flex-grow pa3 flex items-center"},[n("router-link",{staticClass:"f6 dib white bg-animate hover-bg-white hover-black no-underline pv2 ph4 br-pill ba b--white-40",attrs:{to:"front"}},[t._v(" Nouveau ")]),n("router-link",{staticClass:"f6 dib white bg-animate hover-bg-white hover-black no-underline pv2 ph4 br-pill ba b--white-40",attrs:{to:"/url/stats"}},[t._v(" Statistiques ")])],1)])])},c=[function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("a",{staticClass:"link white-70 hover-white no-underline flex items-center pa3",attrs:{href:""}},[s("img",{attrs:{src:n("507e"),alt:"logo",height:"80"}})])}],l=n("e1c9"),u=n("6176"),h={name:"TopBar",components:{HomeButton:l["a"],ConnectionButton:u["a"]},props:{connected:{type:Boolean,default:!0},message:String}},d=h,p=n("2877"),f=Object(p["a"])(d,i,c,!1,null,null,null),m=f.exports,b=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ListCard"},t._l(t.mutable_ids,function(e){return n("card-unique-q-r",{key:e,attrs:{short_url:e},on:{delete_qr:function(n){return t.remove_this(e)}}})}),1)},v=[],_=n("f565"),g={components:{CardUniqueQR:_["a"]},data:function(){return{}},props:{ids:Array},computed:{mutable_ids:function(){return this.ids}},methods:{remove_this:function(t){console.log(t+this.mutable_ids.indexOf(t)),this.$emit("delete_qr",t)}}},w=g,C=Object(p["a"])(w,b,v,!1,null,null,null),q=C.exports,k=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bg-red pa3 flex justify-center"},[n("ConnectionButton",{staticClass:"pa2 br2 teal hover-black fw6 underline",on:{click:function(e){return t.$emit(t.click)}}})],1)},Q=[],R={components:{ConnectionButton:u["a"]}},x=R,y=Object(p["a"])(x,k,Q,!1,null,null,null),B=y.exports,F={components:{ListCard:q,TopBarHome:m,PleaseConnect:B},data:function(){return{input:"https://www.youtube.com/watch?v=6n3pFFPSlW4",apiHandle:"https://qrmanager.rfc1149.net/url",shorts:[],test:"nope",notconnected:!1}},created:function(){this.get_QR()},methods:{get_QR:function(){var t=this;this.test="yes?",a.a.get(this.apiHandle,{withCredentials:!0}).then(function(e){console.log(e),t.shorts=e.data.liste.map(function(t){return t.id}),t.test="yeah!",console.log(t.shorts)}).catch(function(e){e.response&&(console.log(e.response.status),401==e.response.status&&(console.log("not connected"),t.notconnected=!0))})},remove_QR:function(t){var e=this;a.a.delete(this.apiHandle+"/"+t,{withCredentials:!0}).then(function(t){console.log(t),e.get_QR()}).catch(function(t){t.response&&(console.log(t.response.status),401==t.response.status&&(console.log("not connected"),e.notconnected=!0))})}}},$=F,H=Object(p["a"])($,s,o,!1,null,null,null);e["default"]=H.exports}}]);
//# sourceMappingURL=home.e7acc136.js.map